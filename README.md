# Подключение к серверу НИРФИ

## 0. Терминология и нюансы

- Сервер - компьютер, находящийся в НИРФИ
- Клиент - компьютер пользователя, подключающийся к серверу удаленно
- VPN - виртуальная локальная сеть. Для того, чтобы иметь доступ к серверу, нужно быть как бы рядом с ним, в одной сети. Поэтому без подключения к этой сети ничего не выйдет.

**Важно!** На текущий момент у нас имеется только один ключ доступа к VPN, поэтому после окончания работ необходимо отключать клиент от VPN - иначе другой пользователь не сможет произвести подключение.

По всем вопросам, для получения ключа доступа к VPN и чтобы узнать пароль учетной записи обращаться [сюда] (https://t.me/astronom_v_cube)

## 1.  Установка OpenVPN Connect

Загрузка установочного файла по этой [ссылке] (https://openvpn.net/downloads/openvpn-connect-v3-windows.msi) напрямую, или на официальном [сайте] (https://openvpn.net/client/client-connect-vpn-for-windows/) (также доступна х32 версия).
Установка - как обычно.

## 2. Добавление ключевого файла
- Получите сам ключевой файл
- Запускаем OpenVPN Connect
- Переключаемся на вкладку ```upload file```
- Перетаскиваем ключевой файл в окно
- Нажимаем оранжевую кнопку ```connect```
- В случае удачного подключения - появится надпись ```connected``` и статистика переданных данных

В дальнейшем подключение и отключение VPN регулируется переключателем рядом с именем профиля

![Успешное подключение](img/OVPNC.png)

## 3. Подключение к серверу - Linux

Linux является ведущей ОС, так как из нее можно удобно перезагрузиться в Windows, а вот наоборот - нет. По умолчанию при включении/перезагрузке сервера всегда будет запускаться Linux.

### 3.1. Подключение по SSH

- Запустить терминал (в Windows нажатием на ПКМ на пуск -> командная строка, или сочетанием клавиш Win+R, ввод ```cmd``` и далее - выполнить)
- Использовать команду ```ssh $USER$@10.0.0.133```, где вместо ```$USER$``` ввести логин своего пользователя, одно из:
    - ```Sergey```
    - ```Dmitry```
    - ```vfmeln```
    - ```rinbak```
  - При первом подключении в ответ на вопрос о подключении ввести ```yes```
  - Ввести пароль учетной записи

  В случае возникновения ошибки ``` WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!``` используем команду ```ssh-keygen -R 10.0.0.133```, после чего повторяем процедуру

## 3. Подключение к серверу Windows

_В дальнейшем в Windows попадать нужно будет через Linux - она будет ведущей системой. Пока что загрузка по умолчанию в Windows, это временно_

- Подключаемся к VPN
- Запускаем диспетчер подключений к удаленному рабочему столу одним из способов:
    - В поле поиска на панели задач введите Подключение к удаленному рабочему столу и выберите Подключение к удаленному рабочему столу (нажатием на ПКМ можно закрепить это окно в панели Пуск)
    - Нажмите сочетание клавиш Win+R, введите ```mstsc.exe``` и далее - выполнить

Появится окно:

  ![RDP1](img/RDP1.png)

- Раскрываем дополнительное меню "Показать параметры"
- В поле "Компьютер" вводим ```10.0.0.133```
- В поле "Пользователь" вводим имя вашего пользователя, одно из:
    - ```Sergey```
    - ```Dmitry```
- Для облечения дальнейшего подключения можно выставить галочку на пункт с сохранением данных авторизаций, а также создать ярлык на Рабочем столе или в любом другом удобном вам месте для быстрого соединения

![RDP2](img/RDP2.png)

- Нажать "Подключить"
- При первом подключении подтвердить сертификат:

![RDP3](img/RDP3.png)

**Вы подключились!**

## 4. Правильное отключение от Windows

Чтобы не создавать помех другим пользователям, если у вас не запущено активных расчетов, правильным отключением будет не закрыть окно соединения на локальной машине, а выйти из пользователя на удаленном сервере через меню Пуск:

![RDP4](img/RDP4.png)